Bootstrap: docker
# Use Bioconductor as base image
FROM: bioconductor/bioconductor_docker:devel

%labels
  Version v2.0

%help
  Singularity image for DreamChallenge

%files
  main.r  /
  utils/* /utils 

%post

# Already installed in the image: "BiocManager", "survival"
# Part of other dependencies: "magrittr" (tidyverse),

## Install Bioconductor packages
R --slave  -e 'BiocManager::install(c("phyloseq", "mixOmics", "survcomp", "GSVA"))'

## Install CRAN packages
R --slave  -e 'install.packages(c("biospear", "devtools", "igraph", "dplyr", "missRanger", "here"))'

## Install from GitHub
R --slave  -e 'devtools::install_github(c("zdk123/SpiecEasi"))'

%runscript
  Rscript /main.r "$@"